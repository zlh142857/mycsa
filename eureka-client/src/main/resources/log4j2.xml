<?xml version="1.0" encoding="UTF-8"?>
<Configuration status="TRACE">
    <Appenders>
        <Console name="Console" target="SYSTEM_OUT">
            <PatternLayout pattern="[%-5level] %d{yyyy-MM-dd HH:mm:ss.SSS} [%t] %c{1} - %msg%n"/>
        </Console>
        <!--写入数据库配置，在Logger中设置日志级别为error-->
        <JDBC name="databaseAppender" tableName="sys_logs">
            <ConnectionFactory class="com.hx.component.ConnectionFactory" method="getDataSourceConnection" />
            <Column name="CLASS" pattern="%c" />
            <Column name="FUNCTION" pattern="%M" />
            <Column name="LEVEL" pattern="%p" />
            <Column name="MESSAGE" pattern="%msg"/>
            <Column name="USER_NAME" pattern="%X{username}"/>
            <Column name="IP" pattern="%X{ip}"/>
            <Column name="FILE" pattern="%F"/>
            <Column name="LOG_DATE" pattern="%d{yyyy-MM-dd HH:mm:ss.SSS}"/>
        </JDBC>
    </Appenders>

    <Loggers>
        <logger name="com.hx" level="trace" additivity="false">
            <appender-ref ref="Console" level="error"/>
            <appender-ref ref="databaseAppender" level="info"/>
        </logger>
        <Root level="error">
            <appender-ref ref="Console"/>
        </Root>
    </Loggers>
</Configuration>
